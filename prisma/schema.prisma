// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "sqlite"
    url      = "file:./seongwon.sqlite"
}

model User {
    id                String    @id @default(uuid())
    username          String    @unique
    encryptedPassword String
    posts             Post[]
    comments          Comment[]
}

model Post {
    id       Int           @id @default(autoincrement())
    title    String
    content  String
    author   User          @relation(fields: [authorId], references: [id])
    authorId String
    comments Comment[]
    tags     PostsOnTags[]
}

model Comment {
    id       Int       @id @unique @default(autoincrement())
    author   User      @relation(fields: [authorId], references: [id])
    authorId String
    post     Post?     @relation(fields: [id], references: [id])
    comment  Comment?  @relation("TeacherStudents", fields: [id], references: [id])
    content  String
    comments Comment[] @relation("TeacherStudents")
}

model Tag {
    id    Int           @id @default(autoincrement())
    name  String        @unique
    posts PostsOnTags[]
}

model PostsOnTags {
    post   Post @relation(fields: [postId], references: [id])
    postId Int
    tag    Tag  @relation(fields: [tagId], references: [id])
    tagId  Int

    @@id([postId, tagId])
}
